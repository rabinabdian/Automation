@model IEnumerable<SIteDisplayAutomationResults.TEST_STATUS_TB>

@{
    ViewBag.Title = "Automation Test Results";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Automation Test Results</h2>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>
<style>
    .preview_image:hover{opacity:0.7;}
    .appear_image_div {
        top: 50%;
        left: 50%;
        width: 50%;
        height: 50%;
        transform: translateY(-50%) translateX(-50%);
        position: fixed;
        z-index: 9999;
        background: #002447;
        overflow: hidden;
        box-shadow: 0 0 50px black;
    }

    .appear_image {
       display:block;
       margin:auto;
       position: relative;
       z-index: 11;
       top:20px;
       width: 100%;
       height: auto;
    }

    .close_image {
        position: fixed;
        z-index: 12;
        top: 20px;
        right: 20px;
        width: 50px;
        height: 50px;
        cursor: pointer;
        background: #fff url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGhlaWdodD0iNTEycHgiIGlkPSJMYXllcl8xIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgd2lkdGg9IjUxMnB4IiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48cGF0aCBkPSJNNDQzLjYsMzg3LjFMMzEyLjQsMjU1LjRsMTMxLjUtMTMwYzUuNC01LjQsNS40LTE0LjIsMC0xOS42bC0zNy40LTM3LjZjLTIuNi0yLjYtNi4xLTQtOS44LTRjLTMuNywwLTcuMiwxLjUtOS44LDQgIEwyNTYsMTk3LjhMMTI0LjksNjguM2MtMi42LTIuNi02LjEtNC05LjgtNGMtMy43LDAtNy4yLDEuNS05LjgsNEw2OCwxMDUuOWMtNS40LDUuNC01LjQsMTQuMiwwLDE5LjZsMTMxLjUsMTMwTDY4LjQsMzg3LjEgIGMtMi42LDIuNi00LjEsNi4xLTQuMSw5LjhjMCwzLjcsMS40LDcuMiw0LjEsOS44bDM3LjQsMzcuNmMyLjcsMi43LDYuMiw0LjEsOS44LDQuMWMzLjUsMCw3LjEtMS4zLDkuOC00LjFMMjU2LDMxMy4xbDEzMC43LDEzMS4xICBjMi43LDIuNyw2LjIsNC4xLDkuOCw0LjFjMy41LDAsNy4xLTEuMyw5LjgtNC4xbDM3LjQtMzcuNmMyLjYtMi42LDQuMS02LjEsNC4xLTkuOEM0NDcuNywzOTMuMiw0NDYuMiwzODkuNyw0NDMuNiwzODcuMXoiLz48L3N2Zz4=');
        background-size: 30px 30px;
        border-radius: 50px;
        background-repeat: no-repeat;
        background-position: center;
    }

    .close_image:hover {
        opacity: 0.7;
    }
</style>
<script type="text/javascript">

    $(function () {
        $("tr").each(function () {
            var col_val = $(this).find("td:eq(1)").text();
            if (col_val == "PASS") {
                $(this).addClass('PASS');  //the selected class colors the row green//
            } else {
                $(this).addClass('FAIL');
            }
        });
    });

    jQuery(function ($) {
        $('.preview_image').click(function () {
            var img = $(this).attr("src");
            var appear_image = $("<div class='appear_image_div'></div>");
            appear_image = appear_image.append("<img class='appear_image' src='"+ img + "'/>");
            var closeButton = $("<div class='close_image'></div>");
            closeButton.on('click', function () {
                appear_image.remove();
            });
            appear_image = appear_image.append(closeButton);
            $('body').append(appear_image);
        });
    });




</script>


<p>
    @Html.ActionLink("Create New", "Create")
</p>
<div>
    <table class="table" border="1">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Creation_Time)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Test_ID)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.ACTION)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.STATUS)
            </th>

            <th>
                @Html.DisplayNameFor(model => model.COMPONENT_ID)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.HOST)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.ERROR_DETAILS)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.IMAGE)
            </th>
            @*<th></th>*@
        </tr>

                @foreach (var item in Model)
                {


                 <tr id="greetings" class=@item.STATUS>

                            <td>
                                @Html.DisplayFor(modelItem => item.Creation_Time)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.Test_ID)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.ACTION)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.STATUS)
                            </td>

                            <td>
                                @Html.DisplayFor(modelItem => item.COMPONENT_ID)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.HOST)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.ERROR_DETAILS)
                            </td>
                     <td>
                         @{ 
                             string imgsrc = null;
                             if (item.IMAGE != null)
                             {
                                 var base64 = Convert.ToBase64String(item.IMAGE);

                                 imgsrc = string.Format("data:image/png;base64,{0}", base64);
                             }



                         }

                       <img class="preview_image"  src='@imgsrc' style ="max-width:100px;max-height:100px"/>
                         
                         @*@Html.DisplayFor(modelItem => item.IMAGE)*@
                     </td>
                            @*<td>
                                @Html.ActionLink("Edit", "Edit", new { id=item.Test_ID }) |
                                @Html.ActionLink("Details", "Details", new { id=item.Test_ID }) |
                                @Html.ActionLink("Delete", "Delete", new { id=item.Test_ID })
                            </td>*@
                        </tr>
            }

    </table>
</div>